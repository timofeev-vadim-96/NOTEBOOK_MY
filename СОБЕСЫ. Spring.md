# Spring

[Назад](./СОБЕСЫ.md)    

> Что такое фреймворк?

Фреймворк - это инструмент, предоставляющий набор расширяемых шабонов разработки ПО. Управляет жизненным циклом чего-то.

> Что такое Inversion of controle? 

Общее понятие, когда мы отдаем управлением чем-то фрейморвку. Реализацией является Dependencty Injection. 

> Что такое Dependency injection?

Dependency Injection (Внедрение зависимостей) — это шаблон проектирования программного обеспечения, который позволяет объектам получать зависимости извне, а не создавать их самим. Основная цель DI — сделать код модульным, легко тестируемым и расширяемым. Применяется фреймворком Spring для внедрения бинов в качестве зависимостей.

> `Не задавать этот вопрос` Жизненный цикл бина?

1. Создание BeanDefinition
2. Возможность создать свои BeanDefinition(через ImportBeanDefinitionRegistrar)
3. Пост обработка BeanDefinition
4. Создание бинов и внедрение через конструктор
5. Внедрение через сеттеры и поля (в т.ч. через @Value)
6. Вызовы методов Aware-интерфейсов ????? (вроде как для инфраструктурных бинов) - не юзать (bad practice)
7. Пост-обработка бина (1-й этап) (через BeanPostProcessor) (можно встретить прокси при работе с бинами)
8. Вызов методов инициализации (@PostConstruct, InitializingBean, Custom init method (@Bean))
9. Пост-обработка бина (2-й этап) (через BeanPostProcessor)
10. Бин готов к работе
11. Завершение работы
12. Вызов методов деинициализации (@PreDestroy, DisposableBean, Custom destroy method (@Bean))

> Что такое Lazy Initialization/ленивая инициализация?

Ленивая инициализация (lazy initialization) — это техника, при которой ресурс или объект инициализируются только при первой необходимости, а не сразу при старте приложения. Это позволяет экономить ресурсы и улучшать производительность, так как тяжелые операции откладываются до момента фактического использования.

> Что такое прокси-объект?

Прокси-объект - это объект, который служит посредником для доступа к другому объекту, меняя свойства или поведение этого объекта с помощью аспектов.

> Где применяется AOP?

Логирование, транзакции, авторизация, метрики, кэширование, обработка исключений

> Что такое Aspect?

Это класс, содержащий эдвайсы, определяющие дополнительную функциональность прокси-объектов

> Для чего нужен Spring Boot?

Для использования стартеров, содержащих готовый кусок автосконфигурированного контекста + условные бины (ConditionOn...), а также для подключения готового пакета зависимостей, подобранных по версиям

> Какой интерфейс в JPA описывает методы для основных операций над Entity? 

EntityManager

> Какая минимальная версия Java поддерживается в Spring Boot 2 и Spring 5? (Google)

8

> Можем ли мы применить @Autowired с не сеттерами и не конструкторами?

Да, ещё можем с полями класса. Но это является плохой практикой в связи с появлением скрытых зависимостей и проблемами в тестировании, связанные с созданием экземпляра класса и передачей в него зависимостей через специальные Bean-фабрики, либо через Reflection-API.

> Что такое Entity?

POJO-класс, связанный с БД с помощью аннотации (@Entity) или через XML

> Что произойдет, если транзакция не будет зафиксирована до истечения таймаута? Как управлять таймингом транзакций?

откатится. По дефолту таймер на 30 сек. Настроить можно через TransactionManager

> Можно ли откатить часть транзакции? Как это сделать в Spring?

никак

> Как реализовать read-only транзакцию, и в каких случаях это полезно?

Это полезно для методов, которые только читают данные из базы данных и не изменяют их. База данных может оптимизировать чтение, так как не нужно держать блокировки, что повышает производительность и масштабируемость. Выставить в параметрах аннотации @TransactionalA(readOnly = true)

> Что произойдет, если у вас есть метод с @Transactional, но вы вызываете его из другого метода того же класса без использования Spring контекста?

Если вы вызываете метод с аннотацией @Transactional из другого метода того же класса, и вызов происходит без участия Spring контекста (например, из статического метода или напрямую из объекта, созданного с помощью new), аннотация @Transactional будет проигнорирована. Spring AOP (Aspect-Oriented Programming), который отвечает за создание транзакций, работает на основе прокси-объектов, создаваемых Spring контейнером. Если метод вызывается напрямую без прокси, транзакция не будет создана

> В чём разница между @Component, @Service, @Repository, @Controller аннотациями?

- `@Component` является базовой аннотацией 
- `@Service` - для обозначения сервисов
- `@Controller` - для обозначения классов - входных точек приложения для обработки HTTP-запросов. 
- `@Repository` - дополнительно оборачивает исключения при обращении к базе данных в класс DataAccessException 

> Какая аннотация более приоритетнее? @Qualifier или @Primary?

@Primary

> Для чего нужна аннотация @PreAuthorize?

Аннотация `@PreAuthorize` используется в Spring Security для указания, что метод должен быть выполнен только в том случае, если пользователь имеет определенные разрешения.
Она позволяет определить ограничение доступа на уровне метода, на основе выражения Spring Expression Language (SpEL), которое оценивается во время выполнения.
Вот пример использования `@PreAuthorize`:
```java
@PreAuthorize("hasRole('ROLE_ADMIN')")
public void deleteProduct(Long id) {
    // Код для удаления продукта
}
```

> Какое назначение метода load() класса Session

Возвращает прокси вместо реального объекта entity из БД по его идентификатору

> Что такое Dynamic Proxy?

Механизм, который позволяет создавать объект, реализующий необходимые нам интерфейсы во время исполнения программы (динамически). Является одной из двух фундаментальных библиотек для создания прокси-объектов в АОП.