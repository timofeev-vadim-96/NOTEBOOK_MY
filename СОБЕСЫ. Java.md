# Java

[Назад](./СОБЕСЫ.md)    

[доп вопросы по java](https://javarush.com/groups/posts/2590-top-50-java-core-voprosov-i-otvetov-na-sobesedovanii-chastjh-1)

> Сколько примитивных типов данных в Java?

1. byte — 8-битное целое число со знаком (-128..127).
2. short — 16-битное целое число со знаком (-32 768..32 767).
3. int — 32-битное целое число со знаком (~-2 млрд .. ~2 млрд).
4. long — 64-битное целое число со знаком (~-9 квинтиллионов .. ~9 квинтиллионов).
5. float — 32-битное вещественное число одинарной точности.
6. double — 64-битное вещественное число двойной точности.
7. boolean — логический тип данных (true или false).
8. char — символ Unicode размером 16 бит (U+0000..U+FFFF).

> Чем отличается переопределение метода (override) от перегрузки метода (overload)?

* Переопределение (override) — это замена реализации метода в родительском классе новым методом в дочернем классе. Происходит только при соблюдении следующих условий: совпадают имя, параметры и тип возврата, а модификатор доступа не становится строже.
* Перегрузка (overload) — это объявление метода с тем же именем, но с другой сигнатурой (другими параметрами) в пределах одного класса. Возвратные типы не учитываются при перегрузке.

> Что такое слабая ссылка (WeakReference) и зачем она нужна?

Слабая ссылка (WeakReference) — это тип ссылок, которые не препятствуют сборке мусора. Объект, на который ссылаются слабые ссылки, может быть очищен GC, если на него нет сильных ссылок.   
Слабые ссылки полезны для кэширования объектов, которым можно пожертвовать, если память необходима.

> Какой механизм используется в HashMap для разрешения коллизий?

Метод цепочек (бакеты). Бакет из себя представляет LinkedList до того момента, пока его размер не составит 8 элементов, а также мин. размер таблицы должен превышать 64 элемента, а также ключи мапы должны реализовывать интерфейс Comparable. Тогда он преобразуется в красно-черное дерево. 

> Что из себя представляет такая коллекция, как красно-черное дерево, и какие примеры его использования в java вы знаете?

Красно-чёрное дерево — это разновидность сбалансированного двоичного дерева, обладающего свойствами быстрого поиска (O(log n)) и поддержания баланса (гарантированно невысокая глубина дерева). Используется в HashMap, TreeMap, TreeSet, PriorityQueue

> Что такое REST?

это архитектурный стиль, используемый для обмена данными в вебе в формате клиент-сервер.

> В чем отличие между интерфейсами Comparable и Comparator?

Comparable используется для того, что бы задать естественный порядок объекту, Comparator позволяет создавать объекты, которые будут управлять процессом сравнения, например для сортировки.

> Назовите все методы класса Object :

1. notify();
2. notifyAll();
3. clone()
4. toString
5. equals
6. wait(long msecs);
7. hashCode()
8. getClass()
9. finalize - Depricated - вызывается перед удалением неиспользуемого объекта;

> Для чего нужен метод finalize()?

Метод finalize() в Java является методом, который вызывается сборщиком мусора (garbage collector) перед уничтожением объекта. 
Он предназначен для выполнения завершающих действий перед освобождением ресурсов

> Что делает метод reduce() в stream api java?

Используется для сокращения последовательности элементов до единого результирующего значения.

> Дайте определение сервлету

Сервлет (Servlet) — это компонент Java-приложения (интерфейс), предназначенный для расширения возможностей веб-контейнера (такого как Tomcat, Jetty и др.) путем обработки входящих HTTP-запросов и формирования соответствующих ответов клиенту.

> Как создать свой Unchecked Exception (Не проверяемое исключение)?

Наследоваться от RuntimeException

> Чем отличается JDBC Statement от PreparedStatement? 

Statement используется для выполнения простых SQL-запросов к БД, 
PreparedStatement используется для выполнения прекомпилированных запросов с параметрами.

> Что такое shutdownhook?

`Shutdownhook` — это поток, который неявно вызывается до завершения работы JVM(виртуальная машина Java). Таким образом, мы можем использовать его для очистки ресурса или сохранения состояния, когда виртуальная машина Java выключается нормально или внезапно. 
```java
Runtime.getRuntime().addShutdownHook(new ShutdownHookThreadExample());
//
class ShutdownHookThreadExample extends Thread {
   @Override
   public void run() {
       System.out.println("shutdown hook задачу выполнил");
   }
}

> Для чего нужен метод intern() класса String?

Метод `intern()` принудительно добавляет строку в пул строк и возвращает ссылку на объект `String` из пула. Если строка уже существует в пуле, `intern()` возвращает ссылку на существующую строку.

> Что вернет метод session.load(), если в БД нет подходящей записи?

Если после выполнения запроса соответствующая запись все еще не найдена, Hibernate сгенерирует исключение ObjectNotFoundException.

> Для чего нужен интерфейс Callable?

Интерфейс Callable в Java представляет собой функциональный интерфейс, который определяет метод call(), возвращающий объект Future.
Интерфейс `Callable` часто используется в ситуациях, когда задача, которую необходимо выполнить, является длительной или сложной, и требуется получить результат выполнения этой задачи. 

> Включен ли по умолчанию кэш второго уровня Hibernate? Зачем он нужен вообще? К объекту какого класса привязан кеш второго уровня в Hibernate?

По умолчанию - отключен. Нужен для кэширования объектов между разными активными сессиями обращения к бд. Кеш второго уровня в Hibernate привязан к объекту SessionFactory.

> Можем ли мы выполнить нативный запрос SQL (sql native) в Hibernate, используя EntityManager?

При помощи метода createNativeQuery(). Если структура ответа не соответствует сущности, доп. нужно создать и сконфигурировать свой ResultSetMapper 

> Какой в джаве основной ClassLoader?

ClassLoader — это встроенный механизм в виртуальной машине Java (JVM), который отвечает за загрузку байт-кодов классов в память во время выполнения программы. Когда программа обращается к новому классу, ClassLoader находит файл .class, загружает его содержимое и готовит его для дальнейшего использования виртуальной машиной. Основной - Bootstrap ClassLoader

> Условия переопределения equals()?

1. Рефлексивность: Это означает, что объект должен быть равен самому себе. То есть для любого объекта x, выражение x.equals(x) должно возвращать true.
2. Симметричность: Это означает, что если объект x равен объекту y, то и объект y должен быть равен объекту x. То есть для любых двух объектов x и y, если x.equals(y) возвращает true, то и y.equals(x) также должен возвращать true.
3. Транзитивность: Это означает, что если объект x равен объекту y, а объект y равен объекту z, то объект x также должен быть равен объекту z. То есть для любых трех объектов x, y и z, если x.equals(y) и y.equals(z) возвращают true, то и x.equals(z) должен возвращать true.

> Как получить путь к каталогу src/test/resources в JUnit?

С помощью ClassLoader
```java
ClassLoader classLoader = getClass().getClassLoader();
File file = new File(classLoader.getResource("somefile").getFile());
System.out.println(file.getAbsolutePath());
```

> Каким образом можно изменять модификатор доступа при переопределении метода в наследнике?

Можно только расширять - Метод или поле нельзя сделать менее видимым (Принцип подстановки Барбары Лисков)

> Для чего служат callback методы в JPA? 

Эти методы вызываются при наступлении определенных событий в жизненном цикле entity. Например: 
* @PrePersist — вызывается перед добавлением новой сущности в базу данных.
* @PostPersist — вызывается после успешного добавления новой сущности в базу данных.
* @PreUpdate — вызывается перед обновлением существующей сущности в базе данных.

> Что такое Hibernate Criteria?  

Позволяет выполнять запросы в БД без написания SQL кода, используя классы, и вызывая метода в декларативном стиле.

> `@Depricated` В чем разница между model.put() и model.addAttribute() в Spring MVC?

addAttribute это обертка над put, где делается дополнительная проверка на null.

> Что такое перегрузка методов?

Свойство полиморфизма, позволяющее создать методы с одним названием, но разным количеством и типом принимаемых аргументов. Кроме того, может отличаться возвращаемый тип данных

> Что такое сигнатура метода?

Имя метода + аргументы. Используется при перегрузке методов

> Как в теории(может и на практике) остановить Spring приложение?

Если приложение поднято в Docker, то можно ввести команду docker stop, а если через Kubernetes, то ввести команду kubectl delete pod <pod_name>. Если приложение использует Spring boot и включен Actuator, то можно отправить POST запрос на эндпоинт /shotdown. В крайнем случае, использовать утилиту taskkill для остановки процесса. 

> Какой цикл существования у Entity? Другими словами, в каком состоянии может находиться сущность в контексте работы Hibernate? 

* Transient - новый объект, его ни в БД, ни в Кэше первого уровня(контексте)
* Persistence - объект есть в БД и контексте
* Detached - объект есть в БД, но отсутствует в контексте
* Removed - объекта нет ни в БД, ни в контексте


> Обязательно ли в Java за блоком try идет catch?

За блоком try не обязательно должен идти блок catch, но при таком сценарии за try должен идти блок finally.  
Таким образом возможны три варианта: try с 1+ блоком catch, try с finally и try, catch, finally.

> В блоке try ошибка, в блоке catch исключение, в блоке finally при закрытии ресурсов также ошибка, какую ошибку получим в результате?

Если в блоке try происходит исключение, и затем в блоке finally происходит другое исключение, то исключение из блока finally будет тем исключением, которое будет фактически выброшено.

> Try with resources. В каких слуаях его можно использовать?  

Когда ресурс реализует интерфейс AutoCloseable.

> Что такое пессимистические и оптимистические блокировки?

  * оптимистичная - исп. версионность изменений в таблице и проверка версии записи перед обновлением. При попытке изменения записи другой версии - WrongVersionException или подобное (исп. когда много чтения и мало изменения)
  * пессимистичная - блокировка записи в БД, когда не позволит зайти другой транзакции (медленнее работает на чтении, исп. на частых модификациях)

> Можно ли переопределить статические метод?

Нет. Статические методы принадлежат классу, а не объекту, и поэтому они не могут быть переопределены. Вместо этого можно создать аналогичный метод в дочернем классе с тем же именем и сигнатурой, но это будет считаться переобъявлением (shadowing), а не переопределением.